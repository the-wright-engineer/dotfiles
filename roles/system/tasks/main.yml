---
- name: Install default packages using system package manager
  package:
    name: "{{ item }}"
    state: present
  loop:
    - build-essential
    - bash
    - bash-completion
    - fzf
    - vim
    - git
    - zip
    - unzip
    - whois
    - tree
    - xclip
    - mtr
    - dnsutils
    - nmap
    - netcat
    - tmux
    - zsh
    - rsync
    - colordiff
    - jq
    - nodejs
  become: True
  become_user: root
  when: not setup_brew and ansible_os_family != 'Darwin'

- name: Install Starship Terminal
  unarchive:
    src: https://github.com/starship/starship/releases/latest/download/starship-x86_64-unknown-linux-gnu.tar.gz
    dest: /usr/local/bin
    remote_src: yes
  become: True
  when: not setup_brew

- name: Install nvm
  shell: >
    curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.1/install.sh | bash
  args:
    creates: "{{ ansible_env.HOME }}/.nvm/nvm.sh"
